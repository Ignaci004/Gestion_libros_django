{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Libros</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>
<body>

    <div class="falling-book" style="left: 10%; animation-duration: 15s; animation-delay: 1s; background-color: #fce1e4;"></div>
    <div class="falling-book" style="left: 20%; animation-duration: 12s; animation-delay: 2s; background-color: #cbe1ff;"></div>
    <div class="falling-book" style="left: 35%; animation-duration: 18s; animation-delay: 0.5s; background-color: #d8fce1;"></div>
    <div class="falling-book" style="left: 50%; animation-duration: 14s; animation-delay: 3s; background-color: #fff5c5;"></div>
    <div class="falling-book" style="left: 65%; animation-duration: 16s; animation-delay: 4s; background-color: #fce1e4;"></div>
    <div class="falling-book" style="left: 80%; animation-duration: 11s; animation-delay: 5s; background-color: #cbe1ff;"></div>
    <div class="falling-book" style="left: 90%; animation-duration: 13s; animation-delay: 2.5s; background-color: #d8fce1;"></div>
    <div class="container py-5">
    <div id="notification-container" class="position-fixed top-0 start-50 translate-middle-x mt-3" style="z-index: 1050; min-width: 300px;"></div>

    <div class="card journal-container shadow-lg p-4 animate__animated animate__fadeInDown">
        <h1 class="text-center mb-4">
            <span>üìö</span> <span class="text-primary">Lista de Libros</span>
        </h1>

        <div class="d-flex justify-content-end mb-3">
            <a href="{% url 'nuevo' %}" class="btn btn-dark">üìù Nuevo libro</a>
        </div>

        <ul class="journal-list">
            {% for libro in object_list %}
            <li class="journal-entry animate__animated animate__fadeInUp">
                <div class="entry-cover"></div> <div class="entry-content">
                    <h5 class="journal-title">{{ libro.titulo }}</h5>
                    <p class="journal-author">‚Äî {{ libro.autor }}</p>
                    <div class="entry-actions">
                        <a href="{% url 'editar' libro.id %}" class="btn btn-sm btn-edit">‚úèÔ∏è</a>
                        <a href="{% url 'eliminar' libro.id %}" class="btn btn-sm btn-delete">üóëÔ∏è</a>
                    </div>
                </div>
            </li>
            {% empty %}
            <li class="no-entries-message">
                No hay libros registrados.
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function showNotification(message, type = 'success') {
        const container = document.getElementById('notification-container');
        const alertDiv = document.createElement('div');
        alertDiv.className = `alert alert-${type} alert-dismissible fade show animate__animated animate__fadeInDown`;
        alertDiv.setAttribute('role', 'alert');
        alertDiv.innerHTML = `
            <strong>${message}</strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        `;
        container.appendChild(alertDiv);

        setTimeout(() => {
            alertDiv.classList.add('animate__fadeOutUp');
            setTimeout(() => {
                alertDiv.remove();
            }, 1000);
        }, 4000);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const message = urlParams.get('message');
        const type = urlParams.get('type');
        if (message) {
            showNotification(message, type);
        }
    });
</script>
</body>
</html>